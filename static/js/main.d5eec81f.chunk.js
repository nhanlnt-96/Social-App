(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{198:function(e,t,n){},271:function(e,t,n){},272:function(e,t,n){},273:function(e,t,n){},274:function(e,t,n){},280:function(e,t,n){},281:function(e,t,n){},299:function(e,t,n){},300:function(e,t,n){},301:function(e,t,n){},302:function(e,t,n){},303:function(e,t,n){},305:function(e,t,n){"use strict";n.r(t);var a=n(79),r=n(0),c=n.n(r),s=n(39),o=n.n(s),u=n(17),i=n(320),l=n(307),j=(n(198),n(321)),p=n(322),d=n(323),b=n(5),O=[{id:"news-feed",label:"NEWS FEED",icon:Object(b.jsx)(j.a,{}),url:"/"}],f=[{id:"register",label:"REGISTER",icon:Object(b.jsx)(p.a,{}),url:"/register"},{id:"login",label:"LOG IN",icon:Object(b.jsx)(d.a,{}),url:"/login"}],m=n(38),x=n(27),h="LOGIN_USER_SUCCESS",g="LOGOUT_USER",v="GET_AUTH_START",y="GET_AUTH_SUCCESS",w="GET_AUTH_FAIL",k=function(e){return{type:h,payload:e}},I=function(){return{type:v}},T=n(324),S=n(325),_=n(34),L=n(182),P=n(317),E=function(e){e.username;var t=Object(x.b)(),n=Object(r.useState)(!1),a=Object(_.a)(n,2),c=a[0],s=a[1];return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("a",{className:"logout-btn",onClick:function(){return s(!0)},children:"LOGOUT"}),Object(b.jsx)(P.a,{title:"LOGOUT",visible:c,onOk:function(){localStorage.removeItem("accessToken"),t({type:g}),L.b.success("See you soon ! \ud83d\ude0d")},onCancel:function(){L.b.success("We are happy to see you here \ud83d\ude0d"),s(!1)},children:Object(b.jsx)("p",{children:"You are logging out. Are you sure?"})})]})},C=l.a.Header,U=function(){var e=Object(x.b)(),t=Object(x.c)((function(e){return Object(u.a)({},e.isAuth)}));return Object(r.useEffect)((function(){e(I())}),[e]),Object(b.jsxs)(C,{style:{position:"fixed",zIndex:1,width:"100%"},className:"header",children:[Object(b.jsx)("div",{className:"logo",children:Object(b.jsx)("h1",{children:Object(b.jsx)(m.b,{to:"/",children:"SOCIAL"})})}),Object(b.jsx)(i.a,{theme:"dark",mode:"horizontal",defaultSelectedKeys:["news-feed"],children:t.isLogged&&!t.userAuth.error?Object(b.jsxs)(b.Fragment,{children:[O.map((function(e){var t=e.id,n=e.label,a=e.icon,r=e.url;return Object(b.jsxs)(i.a.Item,{children:[a,Object(b.jsx)(m.b,{to:r,children:n})]},t)})),Object(b.jsxs)(i.a.Item,{children:[Object(b.jsx)(T.a,{}),Object(b.jsx)(m.b,{to:"/profile/".concat(t.userAuth.id),children:t.userAuth.username})]},"account"),Object(b.jsxs)(i.a.Item,{children:[Object(b.jsx)(S.a,{}),Object(b.jsx)(E,{})]},"logout")]}):f.map((function(e){var n=e.id,a=e.label,r=e.icon,c=e.url;return Object(b.jsxs)(i.a.Item,{children:[r,Object(b.jsx)(m.b,{to:c,children:"account"===n?t.response:a})]},n)}))})]})},N=n(43),A="LOAD_POST_START",R="LOAD_POST_SUCCESS",D="LOAD_POST_FAIL",F="LOAD_POST_BY_ID_START",Y="LOAD_POST_BY_ID_SUCCESS",B="LOAD_POST_BY_ID_FAIL",M="LOAD_POST_BY_USER_START",G="LOAD_POST_BY_USER_SUCCESS",H="LOAD_POST_BY_USER_FAIL",q="CREATE_POST_REQUEST",z="DELETE_POST_REQUEST",K="EDIT_POST_REQUEST",Q=function(){return{type:A}},W=function(e){return{type:R,payload:e}},J=function(e){return{type:D,payload:e}},V=function(e){return{type:Y,payload:e}},Z=function(e){return{type:G,payload:e}},X=function(e,t){return{type:K,payload:{postId:e,newPostText:t}}},$=n(318),ee=n(314),te=n(315),ne=n(313),ae=n(72),re=n(326),ce=$.a.TextArea,se=function(e){var t=e.allPosts,n=Object(r.useState)(""),c=Object(_.a)(n,2),s=c[0],o=c[1],u=Object(r.useState)(0),i=Object(_.a)(u,2),l=i[0],j=i[1],p=Object(r.useState)(!1),d=Object(_.a)(p,2),O=d[0],f=d[1],m=Object(x.b)(),h=ee.a.useForm(),g=Object(_.a)(h,1)[0],v=Object(r.useState)(!1),y=Object(_.a)(v,2),w=y[0],k=y[1];return Object(b.jsx)(b.Fragment,{children:t.allPosts&&Object(b.jsxs)(ee.a,{form:g,name:"horizontal_login",layout:"inline",onFinish:function(e){if(console.log(e),e.postContent||s){k(!0);try{m({type:q,payload:{postContent:e,postFile:s}}),f(!1)}catch(t){console.warn(t)}finally{o(""),g.resetFields(),k(!1)}}e.postContent||e.postImageURL||L.b.error("Please input your post content!")},children:[Object(b.jsx)(ee.a.Item,{name:"postContent",rules:[{required:!1,message:"Please input your post content !"}],children:Object(b.jsx)(ce,{placeholder:"What's on your mind ?",autoSize:!0})}),Object(b.jsxs)(ee.a.Item,{name:"postImageURL",rules:[{required:!1}],className:"upload-item",children:[Object(b.jsxs)("div",{className:"upload-btn",children:[Object(b.jsxs)("label",{htmlFor:"postImageURL",className:"ant-btn",children:[Object(b.jsx)(re.a,{}),"Upload"]}),Object(b.jsx)("input",{type:"file",id:"postImageURL",accept:"image/*",onChange:function(e){f(!0);var t=e.target.files[0],n=a.a.storage().ref("".concat(t.name)).put(t);n.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);return j(t)}),(function(e){console.log(e)}),(function(){j(100),n.snapshot.ref.getDownloadURL().then((function(e){return o(e)}))}))}})]}),O&&Object(b.jsxs)("div",{className:"upload-progress-preview",children:[Object(b.jsx)(te.a,{percent:l}),Object(b.jsx)(ne.a,{width:150,src:s})]})]}),Object(b.jsx)(ee.a.Item,{shouldUpdate:!0,children:function(){return Object(b.jsx)(ae.a,{type:"primary",htmlType:"submit",loading:w,children:"Post"})}})]})})},oe=n(330),ue=n(311),ie=n(319),le=n(108),je=n(101),pe=n.n(je),de=(n(271),n(11)),be=n.n(de),Oe=n(32),fe=n(327),me="LIKE_POST_START",xe="LIKE_POST_SUCCESS",he="LIKE_POST_FAIL",ge=(n(272),function(e){var t=e.postId,n=e.likes,a=e.userId,c=Object(x.b)(),s=Object(x.c)((function(e){return Object(u.a)({},e.allPostsData)})),o=Object(r.useState)([]),i=Object(_.a)(o,2),l=i[0],j=i[1],p=s.allPosts;Object(r.useEffect)((function(){p.likedPosts&&j(p.likedPosts.map((function(e){return e.PostId})))}),[c,p]);var d=function(){var e=Object(Oe.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c({type:me,payload:{PostId:t,UserId:a}});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(fe.a,{onClick:d,className:l.includes(t)?"like-active":""},"like"),n]})}),ve=n(189),ye=n(328),we=n(308),ke=function(e){var t=e.data,n=Object(x.b)(),r=Object(N.g)();return Object(b.jsx)(we.a,{title:"Are you sure\uff1f",icon:Object(b.jsx)(ve.a,{style:{color:"red"}}),onConfirm:function(){var e;(n((e=t._id,{type:z,payload:e})),t.postImageURL)&&a.a.storage().refFromURL(t.postImageURL).delete().then((function(){console.log("Deleted")})).catch((function(e){console.log(e)}));r.push("/"),L.b.success("Post is deleted")},okText:"Yes",cancelText:"No",children:Object(b.jsx)(ye.a,{},"delete")})},Ie=(n(273),function(e){var t=e.username,n=e.userId,a=Object(N.g)();return Object(b.jsx)("div",{className:"username-hover",onClick:function(){a.push("/profile/".concat(n))},children:t})}),Te=n(329),Se=function(e){var t=e.postId,n=e.postText,a=Object(r.useState)(!1),c=Object(_.a)(a,2),s=c[0],o=c[1],u=Object(r.useState)(n),i=Object(_.a)(u,2),l=i[0],j=i[1],p=Object(x.b)(),d=function(){var e=Object(Oe.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p(X(t,l)),o(!1);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Te.a,{onClick:function(){o(!0)}},"edit"),Object(b.jsx)(P.a,{title:"Edit post",visible:s,onOk:d,onCancel:function(){o(!1)},children:Object(b.jsx)($.a,{value:l,onChange:function(e){j(e.target.value)}})})]})},_e=ue.a.Meta,Le=function(e){var t=e.allPosts,n=Object(N.g)(),a=Object(x.c)((function(e){return Object(u.a)({},e.isAuth)}));return Object(b.jsx)("div",{className:"feed-container",style:{padding:24},children:t&&t.length>0?t.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()})).map((function(e,t){return Object(b.jsx)(ue.a,{style:{width:400},cover:e.postImageURL&&Object(b.jsx)("img",{alt:e._id,src:e.postImageURL}),actions:e.user.username===a.userAuth.username?[Object(b.jsx)(ge,{postId:e._id,likes:e.Likes&&e.Likes.length}),Object(b.jsx)(oe.a,{onClick:function(){n.push("/posts/".concat(e._id))}},"comment"),Object(b.jsx)(Se,{postText:e.postText,postId:e._id}),Object(b.jsx)(ke,{data:e})]:[Object(b.jsx)(ge,{postId:e._id,likes:e.Likes&&e.Likes.length,userId:e.UserId}),Object(b.jsx)(oe.a,{onClick:function(){n.push("/posts/".concat(e._id))}},"comment")],children:Object(b.jsx)(_e,{avatar:Object(b.jsx)(ie.a,{src:e.user.avatarImageURL}),title:Object(b.jsx)(Ie,{username:e.user.username,userId:e.UserId}),description:"".concat(pe()(e.createdAt).format("DD/MM/YYYY - HH:mm"),": ").concat(e.postText?e.postText:"")})},t)})):Object(b.jsx)(le.a,{})})},Pe=n(316),Ee=(n(274),Object(N.i)((function(){var e=Object(x.b)(),t=Object(x.c)((function(e){return Object(u.a)({},e.allPostsData)})),n=t.allPosts;return Object(r.useEffect)((function(){e(Q())}),[e]),Object(b.jsxs)("div",{className:"homepage",children:[Object(b.jsx)("div",{className:"create-post",children:Object(b.jsx)(se,{allPosts:n})}),Object(b.jsx)("div",{className:"news-feed",children:t.loading?Object(b.jsx)(Pe.a,{active:!0,avatar:!0,paragraph:{rows:10}}):Object(b.jsx)(Le,{allPosts:n.allPosts})})]})}))),Ce=n(331),Ue=ue.a.Meta,Ne=function(){var e=Object(N.h)().id,t=Object(x.c)((function(e){return Object(u.a)({},e.allPostsData)})),n=Object(x.c)((function(e){return Object(u.a)({},e.isAuth)})),a=t.postById,c=Object(x.b)(),s=Object(N.g)();return Object(r.useEffect)((function(){c(function(e){return{type:F,payload:e}}(e))}),[e,c]),console.log(t),Object(b.jsx)("div",{style:{padding:"24px 0"},children:a.map((function(e){return Object(b.jsx)(ue.a,{style:{width:"100%"},cover:e.postImageURL&&Object(b.jsx)("img",{alt:e._id,src:e.postImageURL}),actions:e.user.username===n.userAuth.username?[Object(b.jsx)(ge,{postId:e._id,likes:e.Likes&&e.Likes.length}),Object(b.jsx)(ke,{postId:e._id}),Object(b.jsx)(Se,{postId:e._id,postText:e.postText}),Object(b.jsx)(Ce.a,{onClick:function(){s.push("/")}},"roll-back")]:[Object(b.jsx)(ge,{postId:e._id,likes:e.Likes&&e.Likes.length}),Object(b.jsx)(Ce.a,{onClick:function(){s.push("/")}},"roll-back")],children:Object(b.jsx)(Ue,{avatar:Object(b.jsx)(ie.a,{src:e.user.avatarImageURL}),title:Object(b.jsx)(Ie,{username:e.user.username,userId:e.UserId}),description:"".concat(pe()(e.createdAt).format("DD/MM/YYYY - HH:mm"),": ").concat(e.postText?e.postText:"")})},e._id)}))})},Ae=n(312),Re=n(309),De="LOAD_COMMENT_START",Fe="LOAD_COMMENT_SUCCESS",Ye="LOAD_COMMENT_FAIL",Be="CREATE_COMMENT_REQUEST",Me="DELETE_COMMENT",Ge=function(e){return{type:Fe,payload:e}},He=function(e){return{type:Ye,payload:e}},qe=function(e,t){return{type:Be,payload:{id:e,commentBody:t}}},ze=function(e){var t=e.commentId,n=Object(N.h)().id,a=Object(x.b)();return Object(b.jsx)(we.a,{title:"Are you sure\uff1f",icon:Object(b.jsx)(ve.a,{style:{color:"red"}}),onConfirm:function(){a(function(e,t){return{type:Me,payload:{id:e,commentId:t}}}(n,t))},okText:"Yes",cancelText:"No",children:"Delete"})},Ke=function(){var e=Object(N.h)().id,t=Object(x.b)(),n=Object(x.c)((function(e){return Object(u.a)({},e.allCommentsData)})),a=Object(x.c)((function(e){return Object(u.a)({},e.isAuth)}));return Object(r.useEffect)((function(){t(function(e){return{type:De,payload:e}}(e))}),[t,e]),Object(b.jsx)(Ae.b,{className:"comment-list",header:"".concat(n.allComments.length," repl").concat(n.allComments.length>1?"ies":"y"),itemLayout:"horizontal",dataSource:n.allComments,renderItem:function(e){return Object(b.jsx)("li",{children:Object(b.jsx)(Re.a,{actions:a.userAuth.username===e.username?[Object(b.jsx)(ze,{commentId:e._id})]:"",author:e.username,content:e.commentContent,datetime:pe()(e.createdAt).format("DD/MM/YYYY - HH:mm")})})}})},Qe=$.a.TextArea,We=function(){var e=Object(N.h)().id,t=Object(x.b)(),n=Object(r.useState)(""),a=Object(_.a)(n,2),c=a[0],s=a[1],o=function(){var n=Object(Oe.a)(be.a.mark((function n(){return be.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(qe(e,c)),s("");case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(ee.a.Item,{children:Object(b.jsx)(Qe,{autoSize:!0,value:c,onChange:function(e){return s(e.target.value)}})}),Object(b.jsx)(ee.a.Item,{children:Object(b.jsx)(ae.a,{htmlType:"submit",type:"primary",disabled:""===c,onClick:o,children:"Comment"})})]})},Je=(n(280),function(){return Object(b.jsxs)("div",{className:"post-container",children:[Object(b.jsx)("div",{className:"post-header",children:Object(b.jsx)(Ne,{})}),Object(b.jsxs)("div",{className:"post-content",children:[Object(b.jsx)("div",{className:"comment-input",children:Object(b.jsx)(We,{})}),Object(b.jsx)("div",{className:"comment-list",children:Object(b.jsx)(Ke,{})})]})]})}),Ve=n.p+"static/media/page-not-found.32aeed80.png",Ze=(n(281),function(){return Object(b.jsxs)("div",{className:"page-not-found",children:[Object(b.jsx)("img",{src:Ve,alt:"page-not-found"}),Object(b.jsx)("h3",{children:"OOPS !!"}),Object(b.jsx)("h2",{children:"PAGE NOT FOUND"}),Object(b.jsx)(ae.a,{type:"primary",htmlType:"submit",children:Object(b.jsx)(m.b,{to:"/",children:"Come back home page"})})]})}),Xe=n(333),$e=n(188),et=n(334),tt=n(46),nt=n.n(tt),at="https://social-app-lnt.herokuapp.com/auth",rt=function(){var e=Object(Oe.a)(be.a.mark((function e(t,n){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nt.a.post(at,{email:t.email,username:t.username,password:t.password,avatarImageURL:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ct=function(){var e=Object(Oe.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nt.a.post("".concat(at,"/login"),{username:t.username,password:t.password}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=Object(Oe.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nt.a.get("".concat(at,"/auth-user"),{headers:{accessToken:localStorage.getItem("accessToken")}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ot=function(){var e=Object(Oe.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nt.a.get("".concat(at,"/profile/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ut=function(){var e=Object(Oe.a)(be.a.mark((function e(t,n,a){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nt.a.put("".concat(at,"/change-password"),{email:t,username:n,password:a}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),it=(n(299),n(332)),lt=(n(300),function(){var e=Object(r.useState)(!1),t=Object(_.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),s=Object(_.a)(c,2),o=s[0],u=s[1],i=Object(r.useState)(""),l=Object(_.a)(i,2),j=l[0],p=l[1],d=Object(r.useState)(""),O=Object(_.a)(d,2),f=O[0],m=O[1],x=function(){var e=Object(Oe.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(j,o,f).then((function(e){var t=e.data;t.error?L.b.error(t.error):(L.b.success(t),a(!1))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("p",{className:"login-form-forgot",onClick:function(){a(!0)},children:"Forgot password"}),Object(b.jsx)(P.a,{title:"Forgot password",visible:n,onOk:x,onCancel:function(){a(!1)},children:Object(b.jsxs)(ee.a,{name:"normal_update_password",className:"forgot-pass-form",children:[Object(b.jsx)(ee.a.Item,{name:"email",rules:[{type:"email",required:!0,message:"Please input your Email!"}],children:Object(b.jsx)($.a,{prefix:Object(b.jsx)(it.a,{className:"site-form-item-icon"}),placeholder:"Email",onChange:function(e){p(e.target.value)}})}),Object(b.jsx)(ee.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(b.jsx)($.a,{prefix:Object(b.jsx)(T.a,{className:"site-form-item-icon"}),placeholder:"Username",onChange:function(e){u(e.target.value)}})}),Object(b.jsx)(ee.a.Item,{name:"password",rules:[{required:!0,message:"Please input your New Password!"}],children:Object(b.jsx)($.a.Password,{iconRender:function(e){return e?Object(b.jsx)(Xe.a,{}):Object(b.jsx)($e.a,{})},prefix:Object(b.jsx)(et.a,{className:"site-form-item-icon"}),type:"password",placeholder:"New password",onChange:function(e){m(e.target.value)}})})]})})]})}),jt=function(){var e=Object(N.g)(),t=Object(x.b)(),n=Object(r.useState)(!1),a=Object(_.a)(n,2),c=a[0],s=a[1],o=function(){var n=Object(Oe.a)(be.a.mark((function n(a){return be.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s(!0),n.next=3,ct(a).then((function(n){var a=n.data;a.error?L.b.error(a.error,1.5).then((function(){s(!1)})):(localStorage.setItem("accessToken",a.accessToken),t(k(a)),t(I()),L.b.success("Logged in \xf0",1.5).then((function(){e.push("/"),s(!1)})))}));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)(ee.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:o,children:[Object(b.jsx)("h2",{children:"LOG IN"}),Object(b.jsx)(ee.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(b.jsx)($.a,{prefix:Object(b.jsx)(T.a,{className:"site-form-item-icon"}),placeholder:"Username"})}),Object(b.jsx)(ee.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],className:"margin-bottom-pass",children:Object(b.jsx)($.a.Password,{iconRender:function(e){return e?Object(b.jsx)(Xe.a,{}):Object(b.jsx)($e.a,{})},prefix:Object(b.jsx)(et.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(b.jsx)(ee.a.Item,{children:Object(b.jsx)(lt,{})}),Object(b.jsxs)(ee.a.Item,{children:[Object(b.jsx)(ae.a,{type:"primary",htmlType:"submit",className:"login-form-button",loading:c,children:"Log in"}),"Or ",Object(b.jsx)(m.b,{to:"/register",children:"Register now!"})]})]})})},pt=function(){var e=Object(N.g)(),t=Object(r.useState)(""),n=Object(_.a)(t,2),c=n[0],s=n[1],o=Object(r.useState)(0),u=Object(_.a)(o,2),i=u[0],l=u[1],j=Object(r.useState)(!1),p=Object(_.a)(j,2),d=p[0],O=p[1],f=Object(r.useState)(!1),x=Object(_.a)(f,2),h=x[0],g=x[1],v=function(){var t=Object(Oe.a)(be.a.mark((function t(n){return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return g(!0),t.next=3,rt(n,c).then((function(t){var n=t.data;L.b.success(n,1.5).then((function(){O(!1),g(!1),e.push("/login")}))})).catch((function(e){L.b.error(e.response.data.error,1.5).then((function(){g(!1)}))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(b.jsxs)(ee.a,{name:"normal_login",className:"login-form",onFinish:v,children:[Object(b.jsx)("h2",{children:"SIGN UP"}),Object(b.jsx)(ee.a.Item,{name:"email",rules:[{type:"email",required:!0,message:"Please input your Email!"}],children:Object(b.jsx)($.a,{prefix:Object(b.jsx)(it.a,{className:"site-form-item-icon"}),placeholder:"Email"})}),Object(b.jsx)(ee.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}],children:Object(b.jsx)($.a,{prefix:Object(b.jsx)(T.a,{className:"site-form-item-icon"}),placeholder:"Username"})}),Object(b.jsx)(ee.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}],children:Object(b.jsx)($.a.Password,{iconRender:function(e){return e?Object(b.jsx)(Xe.a,{}):Object(b.jsx)($e.a,{})},prefix:Object(b.jsx)(et.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})}),Object(b.jsxs)(ee.a.Item,{name:"avatarImageURL",className:"upload-item",children:[Object(b.jsxs)("div",{className:"upload-btn",children:[Object(b.jsxs)("label",{htmlFor:"postImageURL",className:"ant-btn",children:[Object(b.jsx)(re.a,{}),"Upload"]}),Object(b.jsx)("input",{type:"file",id:"postImageURL",accept:"image/*",onChange:function(e){O(!0);var t=e.target.files[0],n=a.a.storage().ref("".concat(t.name)).put(t);n.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;return l(t)}),(function(e){console.log(e)}),(function(){l(100),n.snapshot.ref.getDownloadURL().then((function(e){return s(e)}))}))}})]}),d&&Object(b.jsxs)("div",{className:"upload-progress-preview",children:[Object(b.jsx)(te.a,{percent:i}),Object(b.jsx)(ne.a,{width:150,src:c})]})]}),Object(b.jsxs)(ee.a.Item,{children:[Object(b.jsx)(ae.a,{type:"primary",htmlType:"submit",className:"login-form-button",loading:h,children:"Sign up"}),"Or ",Object(b.jsx)(m.b,{to:"/login",children:"Login now!"})]})]})},dt=n(310),bt=(n(301),function(){var e=Object(N.h)().id,t=Object(x.b)(),n=Object(r.useState)([]),a=Object(_.a)(n,2),c=a[0],s=a[1],o=Object(x.c)((function(e){return Object(u.a)({},e.allPostsData)})).postByUser;return Object(r.useEffect)((function(){(function(){var t=Object(Oe.a)(be.a.mark((function t(){return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ot(e).then((function(e){s(e.data)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()(),t(function(e){return{type:M,payload:e}}(e)),t(Q())}),[t,e]),Object(b.jsxs)("div",{className:"profile-page",children:[Object(b.jsxs)("div",{className:"user-header",children:[Object(b.jsx)(ie.a,{size:"large",src:c.avatarImageURL}),Object(b.jsx)("h2",{children:c.username})]}),Object(b.jsx)(dt.a,{}),Object(b.jsx)("div",{className:"user-posts",children:Object(b.jsx)(Le,{allPosts:o})})]})}),Ot=[{path:"/",isExact:!0,isPrivate:!0,module:Object(b.jsx)(Ee,{})},{path:"/login",isExact:!0,module:Object(b.jsx)(jt,{})},{path:"/register",isExact:!0,module:Object(b.jsx)(pt,{})},{path:"/posts/:id",isPrivate:!0,isExact:!0,module:Object(b.jsx)(Je,{})},{path:"/profile/:id",isPrivate:!0,isExact:!0,module:Object(b.jsx)(bt,{})},{path:"*",isExact:!0,module:Object(b.jsx)(Ze,{})}],ft=l.a.Content,mt=function(){var e=localStorage.getItem("accessToken"),t=Object(x.c)((function(e){return Object(u.a)({},e.isAuth)})),n=function(e,t,n,a){return function(){return t?n||a?e:Object(b.jsx)(N.a,{to:"/login"}):e}};return Object(b.jsx)(ft,{className:"site-layout content",style:{padding:"0 50px",marginTop:64},children:Object(b.jsx)(N.d,{children:Ot.map((function(a,r){var c=a.path,s=a.isExact,o=a.module,u=a.isPrivate;return Object(b.jsx)(N.b,{path:c,exact:s,children:n(o,u,e,t.isLogged)},r)}))})})},xt=(n(302),n(303),n(304),l.a.Footer);var ht=function(){return Object(b.jsxs)(l.a,{className:"layout",children:[Object(b.jsx)(U,{}),Object(b.jsx)(mt,{}),Object(b.jsx)(xt,{style:{textAlign:"center"},children:"Social \xa92021 Created by Nhan LNT"})]})},gt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,335)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},vt=n(184),yt=n(86),wt={loading:!1,allPosts:[],postById:[],postByUser:[],deletePostResponse:"",error:null},kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case R:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,allPosts:t.payload});case D:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload});case F:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case Y:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,postById:t.payload});case B:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload});case M:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case G:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,postByUser:t.payload});case H:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload});default:return e}},It={loading:!1,allComments:[],error:null},Tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case De:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case Fe:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,allComments:t.payload});case Ye:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload});default:return e}},St={loading:!1,isLogged:!1,response:"",userAuth:"",error:null},_t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return Object(u.a)(Object(u.a)({},e),{},{isLogged:!0,response:t.payload});case v:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case y:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,isLogged:!0,userAuth:t.payload});case w:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload});case g:return Object(u.a)(Object(u.a)({},e),{},{isLogged:!1});default:return e}},Lt={loading:!1,isLiked:[],error:null},Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case xe:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,isLiked:t.payload});case he:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:t.payload});default:return e}},Et=Object(yt.b)({allPostsData:kt,allCommentsData:Tt,isAuth:_t,allLikesData:Pt}),Ct=n(16),Ut="https://social-app-lnt.herokuapp.com/posts",Nt=function(){var e=Object(Oe.a)(be.a.mark((function e(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nt.a.get(Ut,{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){if(!e.data.error)return e;L.b.error("You need to Sig Up/Log In \ud83d\udc4f")})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),At=function(){var e=Object(Oe.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.a.get("".concat(Ut,"/post-by-id/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(Oe.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.a.get("".concat(Ut,"/post-by-user/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dt=function(){var e=Object(Oe.a)(be.a.mark((function e(t,n){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.a.post(Ut,{postText:t.postContent,postImageURL:n},{headers:{accessToken:localStorage.getItem("accessToken")}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ft=function(){var e=Object(Oe.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.a.delete("".concat(Ut,"/").concat(t),{headers:{accessToken:localStorage.getItem("accessToken")}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yt=function(){var e=Object(Oe.a)(be.a.mark((function e(t,n){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.a.put("".concat(Ut,"/edit-post"),{newPostText:t,id:n},{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){return L.b.success("Post edited \ud83d\udc4d"),e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Bt="https://social-app-lnt.herokuapp.com/comments",Mt=function(){var e=Object(Oe.a)(be.a.mark((function e(t,n){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nt.a.post(Bt,{commentContent:n,PostId:t},{headers:{accessToken:localStorage.getItem("accessToken")}}).then((function(e){if(!e.data.error)return e;L.b.error("You need to login")})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Gt=function(){var e=Object(Oe.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nt.a.get("".concat(Bt,"/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ht=function(){var e=Object(Oe.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",nt.a.delete("".concat(Bt,"/").concat(t),{headers:{accessToken:localStorage.getItem("accessToken")}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qt=function(){var e=Object(Oe.a)(be.a.mark((function e(t){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt.a.post("https://social-app-lnt.herokuapp.com/likes",{PostId:t},{headers:{accessToken:localStorage.getItem("accessToken")}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zt=be.a.mark(nn),Kt=be.a.mark(an),Qt=be.a.mark(rn),Wt=be.a.mark(cn),Jt=be.a.mark(sn),Vt=be.a.mark(on),Zt=be.a.mark(un),Xt=be.a.mark(ln),$t=be.a.mark(jn),en=be.a.mark(pn),tn=be.a.mark(dn);function nn(e){var t;return be.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Ct.a)(Dt,e.payload.postContent,e.payload.postFile);case 3:return n.next=5,Object(Ct.a)(Nt);case 5:return t=n.sent,n.next=8,Object(Ct.c)(W(t.data));case 8:n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),console.warn(n.t0);case 13:case"end":return n.stop()}}),zt,null,[[0,10]])}function an(){var e;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Ct.a)(Nt);case 3:return e=t.sent,t.next=6,Object(Ct.c)(W(e.data));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(Ct.c)(J(t.t0));case 12:case"end":return t.stop()}}),Kt,null,[[0,8]])}function rn(e){var t;return be.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Ct.a)(At,e.payload);case 3:return t=n.sent,n.next=6,Object(Ct.c)(V(t.data));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(Ct.c)(J(n.t0));case 12:case"end":return n.stop()}}),Qt,null,[[0,8]])}function cn(e){var t;return be.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Ct.a)(Rt,e.payload);case 3:return t=n.sent,n.next=6,Object(Ct.c)(Z(t.data));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(Ct.c)((a=n.t0,{type:H,payload:a}));case 12:case"end":return n.stop()}var a}),Wt,null,[[0,8]])}function sn(e){var t,n;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Ct.a)(Ft,e.payload);case 3:return a.next=5,Object(Ct.a)(Nt);case 5:return t=a.sent,a.next=8,Object(Ct.c)(W(t.data));case 8:return a.next=10,Object(Ct.a)(At,e.payload);case 10:return n=a.sent,a.next=13,Object(Ct.c)(V(n.data));case 13:a.next=19;break;case 15:return a.prev=15,a.t0=a.catch(0),a.next=19,Object(Ct.c)(J(a.t0));case 19:case"end":return a.stop()}}),Jt,null,[[0,15]])}function on(e){var t,n;return be.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(Ct.a)(Yt,e.payload.newPostText,e.payload.postId);case 3:return a.next=5,Object(Ct.a)(Nt);case 5:return t=a.sent,a.next=8,Object(Ct.c)(W(t.data));case 8:return a.next=10,Object(Ct.a)(At,e.payload.postId);case 10:return n=a.sent,a.next=13,Object(Ct.c)(V(n.data));case 13:a.next=19;break;case 15:return a.prev=15,a.t0=a.catch(0),a.next=19,Object(Ct.c)(J(a.t0));case 19:case"end":return a.stop()}}),Vt,null,[[0,15]])}function un(e){var t;return be.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Ct.a)(Mt,e.payload.id,e.payload.commentBody);case 3:return n.next=5,Object(Ct.a)(Gt,e.payload.id);case 5:return t=n.sent,n.next=8,Object(Ct.c)(Ge(t.data));case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(Ct.c)(He(n.t0));case 14:case"end":return n.stop()}}),Zt,null,[[0,10]])}function ln(e){var t;return be.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Ct.a)(Gt,e.payload);case 3:return t=n.sent,n.next=6,Object(Ct.c)(Ge(t.data));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(Ct.c)(He(n.t0));case 12:case"end":return n.stop()}}),Xt,null,[[0,8]])}function jn(e){var t;return be.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(Ct.a)(Ht,e.payload.commentId);case 3:return n.next=5,Object(Ct.a)(Gt,e.payload.id);case 5:return t=n.sent,n.next=8,Object(Ct.c)(Ge(t.data));case 8:n.next=14;break;case 10:return n.prev=10,n.t0=n.catch(0),n.next=14,Object(Ct.c)(He(n.t0));case 14:case"end":return n.stop()}}),$t,null,[[0,10]])}function pn(e){var t,n,a,r;return be.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,Object(Ct.a)(qt,e.payload.PostId);case 3:return t=c.sent,c.next=6,Object(Ct.c)((o=t.data,{type:xe,payload:o}));case 6:return c.next=8,Object(Ct.a)(Nt);case 8:return n=c.sent,c.next=11,Object(Ct.c)(W(n.data));case 11:return c.next=13,Object(Ct.a)(At,e.payload.PostId);case 13:return a=c.sent,c.next=16,Object(Ct.c)(V(a.data));case 16:return c.next=18,Object(Ct.a)(Rt,e.payload.UserId);case 18:return r=c.sent,c.next=21,Object(Ct.c)(Z(r.data));case 21:c.next=27;break;case 23:return c.prev=23,c.t0=c.catch(0),c.next=27,Object(Ct.c)((s=c.t0,{type:he,payload:s}));case 27:case"end":return c.stop()}var s,o}),en,null,[[0,23]])}function dn(){var e;return be.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(Ct.a)(st);case 3:return e=t.sent,t.next=6,Object(Ct.c)((a=e.data,{type:y,payload:a}));case 6:t.next=12;break;case 8:return t.prev=8,t.t0=t.catch(0),t.next=12,Object(Ct.c)((n=t.t0,{type:w,payload:n}));case 12:case"end":return t.stop()}var n,a}),tn,null,[[0,8]])}var bn=be.a.mark(xn),On=be.a.mark(hn),fn=be.a.mark(gn),mn=be.a.mark(vn);function xn(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ct.d)(q,nn);case 2:return e.next=4,Object(Ct.d)(A,an);case 4:return e.next=6,Object(Ct.d)(F,rn);case 6:return e.next=8,Object(Ct.d)(M,cn);case 8:return e.next=10,Object(Ct.d)(z,sn);case 10:return e.next=12,Object(Ct.d)(K,on);case 12:case"end":return e.stop()}}),bn)}function hn(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ct.d)(Be,un);case 2:return e.next=4,Object(Ct.d)(De,ln);case 4:return e.next=6,Object(Ct.d)(Me,jn);case 6:case"end":return e.stop()}}),On)}function gn(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ct.d)(me,pn);case 2:case"end":return e.stop()}}),fn)}function vn(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ct.d)(v,dn);case 2:case"end":return e.stop()}}),mn)}var yn=be.a.mark(wn);function wn(){return be.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ct.b)(xn);case 2:return e.next=4,Object(Ct.b)(hn);case 4:return e.next=6,Object(Ct.b)(gn);case 6:return e.next=8,Object(Ct.b)(vn);case 8:case"end":return e.stop()}}),yn)}var kn=wn,In=Object(vt.a)(),Tn=Object(yt.d)(Et,Object(yt.a)(In));In.run(kn),a.a.initializeApp({apiKey:"AIzaSyBaK2sKbEoygBTmaiSHez4kiaLVu99LxZk",authDomain:"social-app-api-f6567.firebaseapp.com",projectId:"social-app-api-f6567",storageBucket:"social-app-api-f6567.appspot.com",messagingSenderId:"981708246264",appId:"1:981708246264:web:2b358be1924452d63f7f0d"}),o.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(x.a,{store:Tn,children:Object(b.jsx)(m.a,{basename:"/",children:Object(b.jsx)(ht,{})})})}),document.getElementById("root")),gt()}},[[305,1,2]]]);
//# sourceMappingURL=main.d5eec81f.chunk.js.map